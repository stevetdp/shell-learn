### ftp协议

FTP架构是典型的服务器/客户端架构， FTP服务器有两个端口号20，21. 其中 20是数据端口， 21是控制端口

### PORT模式

当FTP客户以PORT模式连接FTP服务器时，FTP客户端动态地选择一个临时端口号（例如5000）连接服务器的21端口。
注意这个端口号一定是1024以上的，因为1024以前的端口都已经预先被定义好了，被一些典型的服务使用。

## PASV模式

PASV是“passive（被动的）”的意思。当FTP客户以PASV模式连接服务器时，在初始化连接这个过程即连接服务器这个过程和PORT模式是一样的，不同的是，
当FTP客户发送ls、dir、get等这些要求数据返回的命令时，他不向服务器发送PORT指令而是发送PASV指令。
在这个指令中，用户告诉服务器自己要连接服务器的某一个端口，如果这个服务器上的这个端口是空闲的可用的，那么服务器会返回ACK的确认信息，
之后数据连接被建立并返回用户所要的信息（根据用户发送的指令，如ls、dir、get等）。
如果服务器的这个端口被另一个资源所使用，那么服务器返回UNACK的信息，那么这时，FTP客户会再次发送PASV命令，这也就是所谓的连接建立的协商过程。
